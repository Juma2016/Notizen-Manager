/* style.css */

/* Theme tokens */
:root{
  color-scheme: light;
  --bg:#f6f7fb;
  --text:#121826;

  --surface:#ffffff;
  --surface-2:#f2f4f8;
  --surface-3:rgba(0,0,0,.03);

  --border:rgba(18,24,38,.12);
  --border-soft:rgba(18,24,38,.08);

  --muted:#52606d;

  --accent:#c8d9fc;
  --accent2:#4f8cff;

  --button:var(--surface-2);
  --button-hover:#e6eaf2;

  --danger:#dc2626;
  --danger-bg:rgba(220,38,38,.10);
  --danger-border:rgba(220,38,38,.25);
  --danger-text:#b91c1c;

  --overlay:rgba(0,0,0,.45);
  --overlay-strong:rgba(0,0,0,.75);
}

html[data-theme="dark"]{
  color-scheme: dark;
  --bg:#0f1115;
  --text:#e8eefc;

  --surface:#151922;
  --surface-2:#1b2130;
  --surface-3:rgba(255,255,255,.03);

  --border:#2a3347;
  --border-soft:rgba(255,255,255,.05);

  --muted:#8a94ad;

  --accent:#18191a;
  --accent2:#4f8cff;

  --button:#1b2130;
  --button-hover:#2a3347;

  --danger:#ff4d4d;
  --danger-bg:rgba(255,77,77,.12);
  --danger-border:rgba(255,77,77,.25);
  --danger-text:#ff9999;

  --overlay:rgba(0,0,0,.55);
  --overlay-strong:rgba(0,0,0,.85);
}

*{
  margin:0;
  padding:0;
  box-sizing:border-box
}

body{
  font-family:sans-serif;
  background:var(--bg);
  color:var(--text);
  min-height:100vh
}

.container{
  max-width:1200px;
  margin:0 auto;
  padding:20px
}

.header{
  background:var(--surface);
  border-bottom:1px solid var(--border);
  position:sticky;
  top:0;
  z-index:100
}

.header .container{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:15px 20px
}

.tools{
  display:flex;
  align-items:center;
  gap:10px
}

#search{
  padding:10px 15px;
  border:1px solid var(--border);
  border-radius:12px;
  background:var(--surface);
  color:var(--text);
  width:300px
}

#search:focus{
  border-color:var(--accent2);
  outline:none
}

button{
  padding:10px 15px;
  border-radius:12px;
  border:1px solid var(--border);
  background:var(--button);
  color:var(--text);
  cursor:pointer;
  font-weight:600
}

button:hover{
  background:var(--button-hover)
}

.main-button{
  background:linear-gradient(135deg,var(--accent2),var(--accent));
  border:none
}

.main-button:hover{
  background:linear-gradient(135deg,var(--accent),var(--accent2))
}

.cancel-button{
  background:var(--button-hover);
  border:1px solid var(--accent2);
  color:var(--text)
}

.cancel-button:hover{
  background:var(--button-hover)
}

.selector-row{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  flex-wrap:wrap;
  gap:20px;
  margin-bottom:20px
}

.notebook-selector{
  min-width:300px;
  margin-top:20px
}

.notebook-dropdown{
  width:100%;
  padding:12px 15px;
  border:1px solid var(--border);
  border-radius:12px;
  background:var(--surface);
  color:var(--text);
  font-size:16px;
  cursor:pointer
}

.notebook-dropdown:focus{
  border-color:var(--accent2);
  outline:none
}

.notebook-dropdown option{
  background:var(--surface);
  color:var(--text);
  padding:10px
}

.notebook-info{
  margin-top:20px;
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:14px;
  padding:20px
}

.notebook-details h3{
  color:var(--text);
  margin-bottom:8px;
  font-size:20px
}

.last-updated{
  color:var(--muted);
  font-size:14px
}

.sort-controls{
  display: flex;
  align-items: center;
  gap: 10px;
  white-space: nowrap;
  margin-top: 20px;
  transition: opacity 0.3s ease;
}

#sort-select{
  padding:10px 15px;
  border:1px solid var(--border);
  border-radius:12px;
  background:var(--surface);
  color:var(--text);
  font-size:14px;
  min-width:200px;
  cursor:pointer
}

#sort-select:focus{
  border-color:var(--accent2);
  outline:none
}

.notes-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:25px
}

#notesList{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(300px,1fr));
  gap:15px
}

.note-item{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:14px;
  padding:20px;
  cursor:pointer
}

.note-item:hover{
  border-color:var(--accent2)
}

.note-header{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  margin-bottom:10px
}

.note-header>div:first-child{
  flex-grow:1
}

.note-date{
  color:var(--muted);
  font-size:.85rem;
  margin-top:4px;
  margin-bottom:8px;
  font-weight:normal
}

.note-actions{
  display:flex;
  gap:8px
}

.note-actions button{
  padding:5px 10px;
  font-size:12px;
  border-radius:6px
}

.note-content{
  display:flex;
  gap:10px
}

.note-version{
  padding:5px 10px;
  border-radius:6px;
  background-color:var(--accent);
  border:1px solid var(--accent2);
  width:6rem;
  height:2rem;
  font-size:12px;
  font-weight:700;
  text-align:start;
  cursor:pointer
}

.note-no-version{
  background-color:var(--surface);
  border:1px solid var(--border);
  color:var(--text)
}

.version-wrapper{
  display:flex;
  flex-direction:column;
  margin-left:auto;
  justify-content:center;
  align-content:center
}

.version-label{
  text-align:center;
  margin-bottom:4px
}

.version-option{
  font-weight:bold;
  padding:.75rem
}

.edit-note{
  background:var(--border);
  border:1px solid var(--accent2)
}

.delete-note{
  background:var(--danger-bg);
  border:1px solid var(--danger);
  color:var(--danger-text)
}

.delete-note:hover{
  background:var(--danger-bg)
}

.modal{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:var(--overlay);
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:1000;
  padding:20px
}

#modalTitle{
  margin-bottom:1rem
}

.modal-box{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:14px;
  padding:30px;
  width:100%;
  max-width:600px
}

.input-group{
  margin-bottom:20px
}

.input-group input,
.input-group textarea{
  width:100%;
  padding:12px;
  border:1px solid var(--border);
  border-radius:12px;
  background:var(--surface);
  color:var(--text)
}

.input-group textarea{
  min-height:150px;
  resize:vertical
}

.form-buttons{
  display:flex;
  justify-content:flex-end;
  gap:10px;
  margin-top:25px
}

.error{
  background:var(--danger-bg);
  border:1px solid var(--danger-border);
  color:var(--danger);
  padding:15px;
  border-radius:12px;
  margin-bottom:20px
}

.toast{
  position:fixed;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  background:var(--surface);
  color:var(--text);
  padding:15px 25px;
  border-radius:12px;
  border:1px solid var(--border);
  z-index:1001
}

.hidden{
  display:none!important
}

@media (max-width:768px){
  .header .container{
    flex-direction:column;
    gap:15px
  }
  #search{
    width:100%
  }
  .selector-row{
    flex-direction:column;
    gap:15px
  }
  .notebook-selector,
  .sort-controls{
    width:100%
  }
  #sort-select{
    min-width:100%
  }
  #notesList{
    grid-template-columns:1fr
  }
  .notes-header{
    flex-direction:column;
    gap:15px
  }
  .modal-box{
    padding:20px
  }
  .note-header{
    flex-direction:column;
    gap:10px
  }
  .note-actions{
    align-self:flex-start
  }
}

#notesSection{
  margin-top:40px
}

.note-item strong[data-testid="note-title"]{
  display:block;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  max-width:180px
}

.note-item p[data-testid="note-content"]{
  white-space:pre-line;
  word-wrap:break-word;
  margin-top:10px;
  display:-webkit-box;
  -webkit-line-clamp:3;
  -webkit-box-orient:vertical;
  overflow:hidden
}

.note-tags{
  margin-top:10px;
  color:var(--muted);
  font-size:.85rem;
  line-height:1.4;
  word-wrap:break-word
}

.notes-header>div{
  display:flex;
  align-items:center;
  gap:10px;
  flex-wrap:wrap
}

.tag-dropdown{
  padding:10px 14px;
  border:1px solid var(--border);
  border-radius:12px;
  background:var(--surface);
  color:var(--text);
  cursor:pointer;
  min-width:140px
}

.tag-dropdown:focus{
  border-color:var(--accent2);
  outline:none
}

.tag-dropdown option{
  color: var(--text);
  background: var(--surface);
}

.note-content-view{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:var(--overlay-strong);
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:1000;
  padding:20px;
  -webkit-backdrop-filter:blur(5px);
  backdrop-filter:blur(5px)
}

.note-content-box{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:14px;
  padding:25px;
  width:100%;
  max-width:700px;
  max-height:80vh;
  display:flex;
  flex-direction:column;
  overflow:hidden
}

.note-content-header{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  margin-bottom:20px;
  border-bottom:1px solid var(--border);
  padding-bottom:15px;
  flex-shrink:0
}

.note-title-truncated{
  color:var(--text);
  font-size:1.5rem;
  margin:0;
  padding:0;
  word-wrap:break-word;
  word-break:break-word;
  overflow-wrap:break-word;
  flex:1;
  margin-right:15px;
  line-height:1.4;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  display:block
}

#closeNoteView{
  background:none;
  border:none;
  color:var(--text);
  font-size:28px;
  padding:0;
  margin:0;
  width:40px;
  height:40px;
  min-width:auto;
  min-height:auto;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  border-radius:50%;
  transition:background-color .2s;
  flex-shrink:0
}

#closeNoteView:hover{
  background:var(--surface-3)
}

.note-content-wrapper{
  flex-grow:1;
  overflow-y:auto;
  padding:15px;
  background:var(--surface-3);
  border-radius:8px;
  border:1px solid var(--border-soft);
  margin-top:0
}

.note-content-text{
  white-space:pre-wrap;
  word-wrap:break-word;
  word-break:break-word;
  overflow-wrap:break-word;
  line-height:1.6;
  font-size:15px;
  font-family:inherit;
  color:var(--text);
  margin:0;
  padding:0
}

@media (max-width:768px){
  .note-content-box{
    padding:20px;
    margin:10px;
    max-height:85vh
  }
  .note-content-header{
    flex-direction:row;
    gap:10px;
    align-items:center
  }
  .note-title-truncated{
    max-width:calc(100% - 50px);
    font-size:1.3rem;
    text-align:left;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis
  }
  #closeNoteView{
    font-size:28px;
    width:40px;
    height:40px
  }
}

.limit-message{
  margin-top:5px;
  font-size:.85rem;
  color:var(--danger);
  text-align:right;
  padding:3px 0;
  animation:fadeIn .3s ease
}

@keyframes fadeIn{
  from{opacity:0}
  to{opacity:1}
}

.no-results{
  color:var(--muted);
  padding:20px 0
}
